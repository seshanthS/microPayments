<html>
    <head>
        <script src="dist/jquery-3.3.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
        <script type="text/javascript" src="https://seshanths.github.io/microPayments/docs/dist/web3.js"></script>
        <script type="text/javascript" src ="https://seshanths.github.io/microPayments/docs/js/functions.js"></script>
        <link rel="stylesheet" href="https://seshanths.github.io/microPayments/docs/css/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
       
    </head>
    <body>
        <h1> MicroPayments Using ETHereum </h1>

        <div id="myModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                  <span id = "closeBtn"class="close">&times;</span>
                  <h2 id = "dialogTitle">Modal Header</h2>
                  <h3 id = "channelIdHeading"></h3>
                </div>
                <div class="modal-body">
                  <p id="dialogContent">Some text in the Modal Body</p>
                  
                </div>
            </div>
        </div>
        <form class = "form-style-9">
        <label  for="keyField">key</label>
        <input type="text" id = "keyField" />
        <label for="passwordTextEncrypt">password</label>
        <input type="password" id="passwordTextEncrypt">
        <input type ="button" id="encryptBtn" value="Encrypt And Save" onclick="encryptKey()"/>
        </form>
        <!--add divider here-->
        <hr>
        <form class = "form-style-9">
        <input type="radio" name="option" value="createOption" onclick="radioClicked(this)" checked>create Channel
        <input type="radio" name="option" value="signOption" onclick="radioClicked(this)">sign
        <input type="radio" name="option" value="withdrawOption" onclick="radioClicked(this)">withdraw
        <input type="radio" name="option" value="verifyOption" onclick="radioClicked(this)">verify<br>
        </form>
        
        <form class = "form-style-9" id="signForm">
            <h3>SignForm</h3>
            <label for="keyFileBrowser">key File</label>
            <input type ="file" id="keyFileBrowser" name = "files[]" value = "select the encrypted key file"
            accept=".paymentKey"/>
            <label for="amountText">Amount</label>
            <input type="number" name="amount" id="amountText">
            <br>
            <label for="passwordText">password</label>
            <input type = "password" value = password id="passwordTextSign" />
            <br>
            <input type="button" value="sign" id="signBtn" onclick="sign('keyFileBrowser')">
            
        </form>

        <form class = "form-style-9" id="channelCreationForm">
            <h3>Create Channel</h3>
            <label for="keyFileBrowserChannel">key File</label>
            <input type ="file" id="keyFileBrowserChannel" name = "files[]" value = "select the encrypted key file"
            accept=".paymentKey"/>
            <label for="passwordText">password</label>
            <input type = "password" value = password id="passwordText" />
            <br>
            <label for="receiverText">Receiver Address</label>
            <input type="text" id="receiverText">
            <br>
            <label for="amountChannel">Amount In Ethers</label>
            <input type="number" id="amountChannel">
            <br>
            <div id="status"></div>
            <input type="button" value="Create Channel" id="createChannelBtn" onclick="createChannel('keyFileBrowserChannel')">
        </form>

        <form class = "form-style-9" id="withdrawForm">
            <h3>WithdrawForm</h3>
            <label for="keyFileBrowserWithdraw">key File</label>
            <input type ="file" id="keyFileBrowserWithdraw" name = "files[]" value = "select the encrypted key file"
            accept=".paymentKey"/>
        <!--    
            <label for="amountTextWithdraw">Amount</label>
            <input type="number" name="amount" id="amountTextWithdraw">
        -->
            <br>
            <label for="passwordTextWithdraw">password</label>
            <input type = "password" value = password id="passwordTextWithdraw" />
            <br>
            <label for="channelIdWithdraw">ChannelId</label>
            <input type = "number" id="channelIdWithdraw" />
            <label for="signatureFieldWithdraw">signature File</label>
            <input type ="file" id="signatureFieldWithdraw" name = "files[]" value = "select the signature file"
            accept=".signature"/>
            <br>
            <input type="button" value="withdraw" id="withdrawBtn" onclick="withdraw('keyFileBrowserWithdraw')">
        </form>

        <form class = "form-style-9" id="verifyForm">
            <h3>Verify Amount</h3>
            <label for="signatureFile">signature File</label>
            <input type ="file" id="signatureFile" name = "files[]" value = "select the signature file"
            accept=".signature"/>
            <label for="amountVerifyField">amount</label>
            <input type="number"  id="amountVerifyField">
            <input type="button" value="Verify" id="verifyBtn" onclick="verifyAmount('signatureFile')">
            <div id="Verificationresult"></div>
        </form>
        <hr>
      <h1> Documentation </h1>
      <div class = "documentation"> 
        The objective of this project is to use ethereum for small payments.
        Every user has to create a "paymentKey" file by pasting their PrivateKey and entering a password. This encrypts your account. You need this file for every Transaction.
        <br>
        First a payment channel has to be created between two. Maximum amount is added while creating a channel.

        Not every transaction happens Onchain. Only the final transaction happens Onchain. The user pays by signing a transaction in the "sign tab"
        <ol>
            <li>Paste your key in the "key" field. Enter the password then click encrypt and save </li>
            <li>Save the File. This file represents your account.  </li>

        </ol>
        <div class = "createChannelDocumentation">
            
        </div>

      </div>
    </body>
</html>